==================
Calendar generator
==================

Generate a calendar or any other book from templates.

Dependencies
------------

- cmake
- inkscape with extension `inkscape_generator`_, a improved Python version of the original `bash version`_.
- Python3

.. _`inkscape_generator`: https://github.com/galou/inkscape_generator
.. _`bash version`: http://wiki.colivre.net/Aurium/InkscapeGenerator


Steps in a glance
-----------------
- Generate extra pages manually.
- Generate the csv data with ``generate_csv.py`` to feed ``inkscape_generator``.
- Generate the pages from templates and glue all pages with cmake.

Detailled steps
---------------

- Create ``birthdays.csv``

  - Each line: ``YYYY-MM-DD,name``, where "YYYY-MM-DD" is the birth date. Write ``0000`` or ``0001`` for unknown birth year. Birthdays on 29th February are not supported.

- Create ``holidays.csv``

  - Each line: ``YYYY-MM-DD,event``, where "YYYY" is the current year.
  - ``holidays.csv`` can be generated by ``generate_holidays_fr.py`` or ``generate_holidays_cz.py``.

- Create ``moon.csv``

  - Each line: ``YYYY-MM-DD,moon_phase``.
  - ``moon.csv`` until year 2031 is provided.
  - If supported by your font, you can use the `unicode characters`_:

    - New Moon Symbol "🌑", U+1F311.
    - First Quarter Moon Symbol "🌓", U+1F313 or Waxing Crescent Moon Symbol "🌒, U+1F312.
    - Full Moon Symbol	"🌕", U+1F315.
    - Last Quarter Moon Symbol "🌗", U+1F317 or Waning Crescent Moon Symbol "🌘", U+1F318.

  - You can also use the more common `unicode characters`_:

    - new moon "●" (Black Circle, U+25CF)
    - first quarter moon "◑" (Circle With Left Half Black, U+25D0) or "☽" (First Quarter Moon, U+263D)
    - full moon "○" (White Circle, U+25CB)
    - last quarter moon "◐" (Circle With Right Half Black, U+25D1) or "☾" (Last Quarter Moon, U+263E)

  - Fancier symbols can be found on `unicode characters`_.

.. _`unicode characters`: http://www.unicode.org/charts/beta/nameslist/n_1F300.html

- Create ``months-fr.csv`` with the translations of the months of the Gregorian calendar, one month per line.

- Call ``python3 /path/to/generate_csv.py\`` ``-s 8 -b birthdays.csv\`` ``-d holidays.csv\`` ``-m moon.csv\`` ``-t months-fr.csv\`` ``2018 > calendar_data.csv`` to generate the data for Inkscape's generator plugin. Here, ``calendar_data.csv`` is the file containing the calendar data. Feel free to edit it but do not mix up with the first row containing the column headers used by the generator. Call ``python3 /path/to/generate_csv.py`` for command-line options. ``generate_csv.py`` can be found at https://github.com/galou/inkscape_generator.

- Copy your pictures with format landscape 4:3 to ``week-YYYY-WW.jpg`` into a single directory, where ``YYYY-WW`` corresponds to the code given in ``calendar_data.csv``, column ``code``. On operating systems supporting it, you can use symbolic links.

- Edit ``template-odd-fr.svg`` and adapt the path in the svg element with id ``image3107`` to ``"/path/to/week-%VAR_code%.jpg"``, where ``/path/to`` needs to be adapted to the directory where you copied the pictures in the previous step.

- Edit ``CMakeLists.txt`` and adapt it to your needs.

- Create a directory where to build the calendar, e.g. ``build`` inside the directory where ``CMakeLists.txt`` is. Open a terminal and go into this directory.

- Call ``cmake /path/to/build_directory`` and then ``make``.

  - You can also call ``make ${OUTPUT_FILE}-single_page`` for easier debugging, where ``${OUTPUT_FILE}`` is the variable defined in ``CMakeLists.txt``.

- Print with options A4, landscape, long-edge binding. 
